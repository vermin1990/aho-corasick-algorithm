<script>



class Result {
    key;
    startIndex = new Array();
}

class Node {
    id;
    char;
    outpts;
    parentNodeId;
    failNodeId;
    children;
    path;

    constructor(id, char, outputs, parentNodeId, failNodeId, children) {
        this.id = id;
        this.char = char;
        this.outpts = outputs;
        this.parentNodeId = parentNodeId;
        this.failNodeId = failNodeId;
        this.children = children;
        this.path = "";
    }
}

/*Genereate the search expression*/
var nodeGeneratedId = 0;
var nodeContainer = new Array();
var tree = null;

function createExpression(dictionary) {

    let expression = null;

    if (dictionary == null || dictionary.length === 0) {

        console.log('The dictionary was empty!');
        return expresssion;
    }

    //Create the root of the tree which is called start node
    let startNode = new Node(nodeGeneratedId, '', null, null, null, new Array());
    nodeContainer.push(startNode);

    //Generate immediate children of the start node!
    generateStartNodeChildren(startNode, dictionary);

    //start a revursive procedure in order to pouplate the tree
    populateTree(startNode, dictionary);

    //Set all fail relationships
    makeFailRelations(startNode);

    expression = JSON.stringify(startNode);
    console.log(expression);
}

function populateTree(node, dictionary) {

    let children = node.children;

    //TODO : It is a very complex loop!
    for (let i = 0; i < children.length; i++) {

        let currentParent = children[i];
        let statement = currentParent.path + currentParent.char;
        let checkList = new Array();

        for (let j = 0; j < dictionary.length; j++) {

            if (dictionary[j].startsWith(statement)) {

                let pattern = dictionary[j];
                let nextChar = pattern[statement.length];

                if (nextChar === undefined || checkList[nextChar.charCodeAt(0)] === true) {
                    continue;
                }

                checkList[nextChar.charCodeAt(0)] = true;
                nodeGeneratedId += 1;

                let newChild = new Node(nodeGeneratedId, nextChar, new Array(), currentParent.id, null, new Array());
                newChild.path = currentParent.path + currentParent.char;

                for (let z = 0; z < dictionary.length; z++) {
                    if (dictionary[z] === (newChild.path + newChild.char)) {
                        newChild.outpts.push(newChild.path + newChild.char);
                    }
                }

                currentParent.children.push(newChild);
                nodeContainer[newChild.id] = newChild;
            }

        }
        populateTree(currentParent, dictionary);
    }
}

function makeFailRelations(node) {

    let queue = new Array();

    for (let i = 0; i < node.children.length; i++) {
        queue.push(node.children[i]);
    }

    while (queue.length != 0) {

        let selectedNode = queue.shift();

        if ((nodeContainer[selectedNode.parentNodeId]).char === "") {

            selectedNode.failNodeId = selectedNode.parentNodeId;

            for (let i = 0; i < selectedNode.children.length; i++) {
                queue.push(selectedNode.children[i]);
            }
        }
        else {

            //TODO: Bad Practice!
            let isFirstItarate = true;
            let failNode = 0;
            while (failNode != null) {

                //TODO: Bad Practice
                if (isFirstItarate === true) {

                    failNode = nodeContainer[(nodeContainer[selectedNode.parentNodeId]).parentNodeId];
                    isFirstItarate = false;
                }
                else {
                    failNode = nodeContainer[failNode.parentNodeId];

                }

                if (failNode != null) {

                    for (let i = 0; i < failNode.children.length; i++) {

                        if (failNode.children[i].char === selectedNode.char) {

                            selectedNode.failNodeId = failNode.children[i].id;

                            if (failNode.children[i].outpts.length != 0) {

                                for (let j = 0; j < failNode.children[i].outpts.length; j++) {
                                    selectedNode.outpts.push(failNode.children[i].outpts[j]);
                                }
                            }

                            for (let j = 0; j < selectedNode.children.length; j++) {
                                queue.push(selectedNode.children[j]);
                            }

                            failNode = null;
                            break;
                        }
                    }
                }

                //Inner while-loop exit point!
                if (failNode === undefined || failNode == null) {

                    //When no fail node is found for the selected node, just redirect it to the start node!
                    if (selectedNode.failNodeId == null) {

                        selectedNode.failNodeId = nodeContainer[0].id;

                        for (let i = 0; i < selectedNode.children.length; i++) {
                            queue.push(selectedNode.children[i]);
                        }
                    }

                    break;
                }
            }
        }
    }
}

function generateStartNodeChildren(startNode, dictionary) {

    let checkList = new Array();
    for (let i = 0; i < dictionary.length; i++) {

        let pattern = dictionary[i];
        let char = pattern[0]
        let charCode = pattern.charCodeAt(0);

        if (checkList[charCode] === undefined) {

            nodeGeneratedId += 1;

            let child = new Node(nodeGeneratedId, char, new Array(), startNode.id, startNode.id, new Array());
            child.path = startNode.path + startNode.char;

            // TODO : Can we improve the BigO?!
            for (let j = 0; j < dictionary.length; j++) {

                if (char == dictionary[j]) {
                    child.outpts.push(char);
                }
            }
            startNode.children.push(child);
            nodeContainer[child.id] = child;
            checkList[charCode] = true;
        }
    }
}


function fileSearch(patterns, context) {

    // Create the tree before searching operation
    createExpression(patterns);

    //Set the cursor index to the start node
    //Set the cursor Node to the start node
    let cursorIndex = 0;
    let cursorNode = nodeContainer[0];
    let results = new Array();
    let hasFound;

    while (cursorIndex < context.length) {

        hasFound = false;
        let indexedChar = context[cursorIndex];

        while (true) {

            for (let i = 0; i < cursorNode.children.length; i++) {

                if (indexedChar === undefined)
                    break;

                if (cursorNode.children[i].char === indexedChar || cursorNode.children[i].char === indexedChar.toLowerCase()) {

                    if (cursorNode.children[i].outpts.length != 0) {

                        for (let j = 0; j < cursorNode.children[i].outpts.length; j++) {

                            let result = new Result();
                            result.key = cursorNode.children[i].outpts[j]
                            result.startIndex.push(cursorIndex - cursorNode.children[i].outpts[j].length + 1);
                            results.push(result);

                        }
                        cursorNode = nodeContainer[cursorNode.children[i].id];
                        hasFound = true;
                        break;

                    }
                    // When cursor node's i children has no outputs, change the cursour node and move the cursor index to
                    // The nex char
                    cursorNode = cursorNode.children[i];
                    cursorIndex += 1;
                    indexedChar = context[cursorIndex];
                    i = -1;
                }
            }

            if (hasFound === true) {
                cursorIndex += 1;
                break;
            }
            else {

                cursorNode = nodeContainer[cursorNode.failNodeId];

                if (cursorNode == null || cursorNode === undefined) {

                    cursorNode = nodeContainer[0];
                    cursorIndex += 1;
                    break;
                }
            }
        }
    }

    nodeGeneratedId = 0;
    nodeContainer = new Array();
    tree = null;

    return results;    
}


var file=".monna^hashemi^1.fiiiisimaa^dimohammadi^100016.reza^shahrokhii^100040.saber^fathollahi^100057.alireza^dashtbayaz^100065.asdasdasd^sasdasdharifi^0000100123.mohammadi^vafaeirad^100131.mohammad^abdiyan^100149.^^100180.mahsaaa^rahnama^100222.nayere^razavi hashemi^10023.saedeh^jafaryazdi^100495.mostafa^khaksari^100768.mojtaba^egbal^100800.esmaiiil^jhjh^100834.marya^^100842.aaa^aaaaa^100883.emraan^hoseinzadeh^100891.^^100941.taghi^salmani ha^101212.sanaz^hoshi^101253.^^33332.akbar^ali panah^101485.mohammad javad^sedaghat^101501.ali mohammad^zahmatkesh^3495579.roya^tavassoli^2253.iman^aminipour^101568.^^101576.mahmoud^pourfarzad^101584.^^101600.^^101667.somaye^hesari nejad^1011014.^^101766.navid^ahangari kave^101774.cobra^soliemani^101881.saeid^pourali^101899.^^101907.sayed reza^jafaraiyan^5511019.^^102004.nazanin^bahmanpour^102038.^^102046.farhad^farhadi kia^102053.kazem^lashgari^102061.fatemeh^saedei chameneh^21409529.mah lagha^pahlavan^14142.^^102145.maryam^sharif^102152.rogaye^soltanpor^102186.aref^ghorbani^102202.abdolrasool^iegdari^102210.shahin^vaziri^102301.afshin^asmal vandrakhshai^102392.^^5009.abedin^hosseini^6969695.kazem^gholabi^102616.rahman^zandevakili^102657.^^102699.morteza^heydarinejad^102715.bahador^nouruzy^102756.mirjamal^seyedi esfahlani^102764.ali^ezatiyan^102772.parviz^jamshidi^102806.mohsen^tork abadi^100081.majid^aghavali^100412.^^1000009.mahdi^khosravian^100453.farshed^zahedee^100560.hossein^hasan zadeh^100578.morteza^raisifard^100586.maryam^^100644.maryam^ghalazadeh^100651.negar^alli akbari^100669.rozhin^khosravi^100693.^^100701.^^100735.mahdi^yosefi^100750.fateme^vahed dehkordi^100784.mona^salmani^100859.mahia^kordli^100909.^^100933.e^e^100974.farzad^ghorbani^100982.mahbobeh^shafei^101022.jalil^hatef^101048.amir^navvabian tehrany^101071.saeed^tosi^101097.amin^pishdad^101261.hadi^abbasi^125.^^101329.saied hamid reza^tabatabaie^1263.^^101345.^^101360.javad^ranjbar^101394.mohammad reza^heidari zare^101493.mohammad^heydari^101519.mohamad^shahabi moghadam^101527.kumars^moazami^101550.majid^ranjbar chaleshtori^101626.davood^shamsaei^101659.somayeh^shafaei^10000008.roya^shah aghaee^1572700.hamed^feizabadi^101816.^^101865.aaaaaaaaaaaaaaaaa^aaaaaaaaaaaaaaaaaaa^101923.fariba^sargazi^101931.maryam^aghai^101956.^^840355.golamreza^soltanpor^102178.roya^soltanpor^102194.^^102228.nazar ali^mortezaei ghahrudi^102277.yoosef^janghoori^828.ggg^aa^102327.shahab^solaymani^102426.mohamad tagi^tanhayi ahari^102418.babk^bahmani^75.eyvaz ali^aghasakhlu^102491.^^102533.hossein^parapi^5530605.hossein^mohamad poorzarandi^100073.hojatollah^molasalehi^100099.seyed eissa^ahmadi^100107.hirbod^masoomi^100115.mohammad^gholizadeh^100156.ygi^tg^100164.ali ashraf^hajiyan^100172.majid^heshmati^100214.mehri^bargneieis^100552.^^100545.morteza^halvaei^100719.^^100727.^^100743.mehdi^sedigollahi^100792.bahram^shalikar marzangoo^101006.morteza^barati^101014.^^101030.^^101139.hamid^kharestani^101238.^^101352.ali^moghadam^101287.vahid^hadi^1010107.elmira^navard^101618.^^101642.rahmat abady^^101675.mehdi^ebadi fard^101683.manouchehr^moadab manesh^101709.omid^ebadi^101725.mohammad^mohammad nejad^101741.^^101840.mohammad^ashrafi^102012.^^102020.mahdi^tooshin par^102103.^^1001015.^^102137.shapour^heidari^102236.jaber^ali zadeh heshmat abad^102244.^^102251.said nezam adin^hoseini^102293.mahmood^mohamadi^1366665.mohammad reza^ebrahimi^102350.^^102368.mehdi^ali madadi^102376.behnaz^gholami^102384.sirwan^zandi^102400.hamidreza^movasagh^102459.^^102442.maleki^masumeh^102517.sahar^shojaee^410472.aaaaaaa^aaaaa^102582.saber^aalaei^102608.^^102624.somayeh^bahrami mofid^102640.hamid^asgharh^1572718.akbar^dadkhahe^102673.reza^rezaei^102681.mehdi^pakize^102707.saeed^ghanjeh loo^102723.vali^yoosefi^102749.emzadar^city bank^26.somaye^bideh^100024.allireza^khatibi^100032.^^100248.morteza^tavakoli^100255.hassan^khosravi^100420.amir^iman einy^100511.mahmod^halagarani^100529.sara^ghahramani chabok^100537.saeid^vasheghani farahani^100610.amir^ebrahimi^100628.shahram^safari saghavaz^100677.sanaz sadat^abrar^100685.hadi^tafazoli^100776.hamed^abbasi^10009.^^100917.abbas^ali^100925.hamed^shahbaz nema^100958.farhad^hatami^100966.mahmood^poormoghim^100990.aa^aa^101063.^^101105.hosen^shahbaznea^101220.rahim^eslahi^101246.mahvash^batmanghlichifard^101279.amir^mazhari^101295.soleiman^aghaeikhoramabadi^101303.seyed abbas^rahimi khatibani^101386.saleh^karimzadeh^101402.yaghoob^sevdmi^20206.ahmad^heshami^101477.habib^gholami^101469.f^ff^101592.abdol hossin^seraji^101634.mohammad^homaie^101717.hamed^karimlo^101782.^^101790.^^101824.mohammad^khoshvaght^7302.farid^ameri^101857.^^101873.mohsen^hashemi nejad^101915.shervin^vaziri^102095.marziyeh^saidi nasab^102111.mehdi^jafari^102160.sedeigheh^haji shafie^3333333.farzaneh^khalkhali^102525.mohammad hosine^soltani^102541.^^102665.alireza^navidi moshir abad^102780.a^a^102798.esmail^abdollahi^102814.zahra^khazaee^102822.ebrahim^ghasempor^102848.^^102855.danial^soleymani^102830.mohammad hosein^khani ali abad^102863.alireza^maddahiravesh^102871.samad^alvandandrian^102889.wwwwwwwww^ddddddd^102921.^^103192.^^103234.salman^amiri alieh kelaie^103259.^^103283.^^103366.^^103382.heshmat^medizadeh^103820.maryam^golipoor^103846.^^103861.mohammad^rashidi^103978.shafi^asgar^103994.hamed^mohammadi^104299.alireza^kalantari^104331.monire^yadaee bahador^104711.aidin^babaei^104802.mahmoud^bayat^104828.masuod^vafa^104943.majid^noori^104950.^^104976.amamoyrdi^abdpor fard^105023.ali^heyrani^105106.ahmad^bakhshzadeh^105437.heydar^mokhatarian^105445.ghorbanail^shakib afshord^105551.alahverdi^ali zade^105577.hassan^piri^105783.majid^ajorloo^105999.hosein^shah panah^106229.abolfazl^shahbazi^106310.ata^baba^106393.davood^hashemi barzabadi^106724.^^106732.aaaaaaaaa^aaaaaa^106740.aaaaaa^aaaaaa^106773.aaaaaaaaaa^aaaaa^106781.seyedreza^noorestani^106799.^^106815.hamidreza^aali^106823.akbar^rasooli^106831.alireza^rabiee^106849.hasan^araghi^106864.mohammad^khan abadi^106880.mohsen^hoseynjani^106906.seyed aliakbar^atifeh^106914.alireza^jahanshah lo^107011.aboalfazle^aeedi mehr abadi^107003.elaheh^godaki^107060.khalil^ghafari^107086.hamid^teymoori^107094.^^107458.hamdalah^framarzi^107417.rooholah^ranjkesh^107508.mohamad^faraji^107557.mohammad^hoseini^113738.^^107623.ali^fardin por^107698.faeze^amini^107722.ali asghar^ghasemian^107748.abolfazl^farah vashi^107763.esmail^meskaranian^102954.fatemeh^hadad^103184.hossein^ghahghahaie nezam abadi^103507.kiumars^kazemi^103580.sadegh^alam zade^2220.abolfazl^hoseinkhanloo^103911.^^104398.morteza^ramazani^104810.meysam^khani^104844.arastoo^noorozkhany^106252.manochehr^por mohammad negad gabie^106286.abbas^hallaji^106336.alii^amini^106377.milad^tayebi zad^106401.m^n^106609.aaaaa^aaaaaaa^106617.sawd^sdfqdf^106666.mohammadreza^landarani^106674.^^106708.^^106757.ahmad^ghamgin^106807.mohamad reza^asgrey torkany^106716.^^106922.^^107201.seifali^boote chayi^107391.^^107441.^^107524.mohamad reza^rekuta^107813.mahmood^zarin bakht^107854.davood^akbari^107862.mehdi^khodarahmi^107870.^^107888.^^107896.^^107904.gholamali^ashnagar^107912.gholamhosein^talebi gharakani^107938.hasan ali^keshavarz^107953.mohammad^eshghali farahani^107961.ali^eskandary^107979.^^107995.alireza^ghasem peyvandi^107987.karim^heidarzadeh^108001.fahime^danai nazar^108019.^^108027.shogaaldin^azimzadeh^108035.saeed^naseri^108043.marjan^sheibani doloee^108050.seyed hossein^bani fatemi^108068.^^108076.^^108118.asadolah^arab^108142.^^108159.abolfazl^asnaashari^108167.mojtaba^adinezamenjani^108183.mojtaba^razipoor^108191.mojtaba^rezaee^108209.^^108217.^^108225.abolfazl^cheragh roshan^108233.reza^ebrahim zade^108241.^^108266.kobra^nazme^108282.shahram^hasanpoorabrighi^108290.^^102939.vahid^zarandi^103176.^^103333.azar^ghanati^103416.^^103804.gholamreza^amini^103838.mohhamad^golipoor^103879.^^104125.mohammad^navaei sh^104166.afshin^bolhasani^104232.seyed masud^mehdiani^104430.seyed fakhreddin^mir davoodi^104448.zabiolah^mirzaei^104455.mohammad^kamal abadi farahani^104885.^^104919.^^105007.akbar^khalili^105031.davod^vahid^105049.mohamad^najafi leylab^105056.ali^najafi^105114.karim^haghighi^105122.mojtaba^badri boghmej^105130.ahmad^hosien zadeh^105155.kazem^mohammadi komanj alia^105171.^^105379.akbar^reza mandi^105452.reza^rafatpanah^105684.hamze^amir flahi^4358.sina^ghrbani^105742.morteza^farzane^105759.ali^shahedi^105882.elham^partovi^105916.ali^shafiee^106054.^^106146.roghiye^parsa amrolah^106153.^^106161.^^106195.^^106302.^^106351.^^106443.^^106450.masome^getmiri^106468.^^106963.amirali^yonesian^7699093.fatemeh^boniadi^107235.mahdi^ghabol^107433.ali reza^heydari^107466.amir^torkashvand^107516.mazear^yousefi^107540.^^107573.gholamhoseyn^yazdi^107599.rasol^tan tajik^107649.monireh^khosravi^107706.gholamreza^hasanidiba^107714.tabarak^falah^107797.hoseyn^dehghani^107805.^^108092.reza^amni shire jini^108100.^^108126.^^108134.asef^azhm zadeh^108258.ali^ebadpourzang abad^108274.^^108308.kadega^bick^108316.leila^seri^108324.mobina^niyazkhani^102988.orouj^pour saleh^102996.elahe^ghorbani^103002.melina^niyazkhani^103010.omid^nemati^103044.mohammadbagher^omidi^103051.mansoureh^esfaneiari^103069.maryam^ghadiri^103085.javad^delpasand^103127.^^103135.javad^manavi^103150.saeed^naghibyan^103143.mostfa^rastgo^103317.mehdi^bagheri^4671.^^103465.^^103523.^^103531.^^103572.mohsen^tavakoli^103663.^^103689.^^103713.saeid^sayah por^103812.^^103887.^^103952.ghasem^tajary^20008.leila^kashi pazzaded^104018.^^104042.ali^karimi pour^104067.azam^latifi^104083.^^104117.reza^khosravikia^104109.afsaneh^sabory^104133.mohamad^khanian^104174.m^m^104349.^^104356.maghsoud^ghasempour^104661.saber^pashaei saei^104687.maryam^emami razlighi^104778.majid^iranzad^104901.babak^rahmani^105189.samad^zareai^105213.habib^norizade^105262.naser^azizi moshir abad^105338.rasool^zarean baje baj^105353.kazem^ghahraman por^105429.akbar^dehghani^105502.mohammadreza^ghahremanipor markid^2000008.shiva^fatehinobarian^105528.yousef^rezaei^105544.aliasghar^zare^105569.samira^damshenas^105585.mhamad^palangi^105668.^^106948.ali asghar^salehi^107177.morteza^khalil arjmandi^107193.mehdi^vahedi^107219.rahim^jafari^107276.bahman^aminy^107284.hosein^kalkhorani^107342.vajihola^badakhshan^107680.^^107821.majid^yousefi^102970.hab^banh^103119.^^103226.mahdi^tabasi^103242.^^103309.mahmood^noori^103606.^^103614.^^103747.majid^bagheri^103770.^^103788.ali^akbari^104034.mehdi^hashemi^104141.ferigerd^razmazma^104265.ali morad^mansori^104364.gholamabbas^moazzen^104380.hasan^moosavi^104406.shima^baka^104505.magid^noroozi^105072.mina^nori gharah tapah^105163.ali^asad^105197.hosein^bayat^105221.^^105270.ebrahim^naghipoor^105296.mohamad^asadi^105312.mohammad^ghafari^105320.eslam^abaspor fard^105361.valee^khodaei^105395.^^105403.gholamreza^nojavan^105411.abbas^ghorban zadeh^105460.seyed hamid^sajadi^105494.^^105593.mohammad^kamran monavar^105627.mohammad^nazari^105635.ali^behrozzadeh^105676.ali^cheragh roshan^105700.bentolhoda^gholami^105791.ataolah^poshtjany^105841.sied mostafa^mirkarimi^105940.^^105957.zahra^zahra^105932.abdolghani^khosh sima^106013.jafar^abotalebi saee^106096.^^106641.bgvgbhbnh^fgtgvfdx^106658.mehdi^jerinokhandan^106682.saeed^hatami^106955.anvar^abdi^106971.bahram^bachol^106997.salman^eskandari^107029.borjali^ahmadiyan^107037.hosein^asad nezhad^107045.alireza^shademan^107052.seyed morteza^jamali^107078.kamal^akbarzade^107102.ali^abdolkarimi^106989.bahman^khaleghi hojghan^107110.abolfazl^ahmadpoor^107144.ahmad^tabatabaai^107383.eslam^eskandari^107425.masomeh^taherian^107490.iraj^yazdani^107656.^^107672.hemat^fadakar eskandar abad^102897.farzaneh^naseri^102905.majid^fallah^103028.^^103077.mahdi^ghaffari^103101.khalil^kashani^103515.ali reza^karimi^103556.abolfath^moazzemi fard^103598.mahmood^ghorbani^103622.^^103648.ghazal^jafari^103655.^^103721.mohsen^moghadasi sanjabi^103739.mostafa^saedi^103754.abotaleb^manafi^103762.moein^miri^103853.nasrin^raeisi nafchi^103929.reza^anarchi^103986.d^d^104208.mahbobe^havaseli^104463.seyed reza^hashemi moghadam^104489.somaye^soltani^104497.^^104513.hossein^shah ali^104794.mehdi^asghari^104836.fatemeh^majid zadeh^104851.maryam^faryam mansh^104968.yaser^sabri^104984.vahid^najafi^105015.saeid^khodayari^105080.moien^abotalebi^105148.mahdi^abasi semnani^105239.somayeh^bajlani^105775.mohamadali^hasanpoor^105817.^^105833.^^105874.mohamadreza^hamzeian^105809.^^105908.abolfazl^sadegh zadeh^105981.ashraf^mirzaee^106070.hasan^farsh foroosh imani^106088.omidali^shamsi zamenjani^106120.iman^bagheri^106187.leila^niee khaljan^106237.gholamreza^salehi^106385.darioush^bafandeh^106419.esmaeel^salehi mrzeejrani^106427.mohammad reza^baghbanbashi jabari^106435.^^106476.^^106492.bahram^safari^106484.reza^taheri motlagh^106518.shahrooz^hanifi^106567.rahim^talaei^106765.ataolah^sohrabi^106930.reza^ghouravan^106898.reza^rahpeimaye arasi^107169.^^107185.mahboobeh^arab^107227.^^107243.fatemeh^sangchi^107250.mohamad^berenjkooban^107268.mahmood^ostadi moghadam^107292.mohammad^moniri^102913.^^103200.majid^rahime^103218.elahe^a^103267.^^103275.saeeide^borhaninezhad raini^103291.mohammad^shafikhani^103325.ali^alipur^103374.amir^afraz asfandarani^103358.^^23377476.^^103408.^^58131954.^^103432.amir^farhadkhani^103440.sohrab^amini^103457.davood^ghorbani senei^103481.hamid reza^naghavi^103499.davood^aghazadeh^103549.aliakbar^shadab^103671.homayoon^berjis^103705.roholah^moradi^103564.pooya^golipoor^104059.omid^liry^104091.mostafa^ramezanipoor^104158.^^104240.milad^nazari^104315.^^104323.gholamabbas^mighani^104471.reza^najafi^104562.^^104588.amin^vahdani^104638.jalel^abedenei^104620.hojatolah^nemati^104653.ashagh^vahdani^104679.najaf^gholami negarestan^104703.yaghoob^soltani^104729.firooz^ranjbar^104737.solmaz^shafaati^104745.khalil^safei^104752.hasan^eyvazi ghrabaghloo^104760.rasool^aghakishi zadeh^104786.aliasghar^vanaeii^104869.mohamad^anjoman roz^105064.hosen^asanlo^105205.^^105254.^^105247.^^105288.amir^abedini^105304.^^105346.ensyeh^abdoljabary^105478.^^105718.ahmad^badnorooz^105726.rezvan^salighe^105825.^^105767.^^105866.ali^rezazadeh^106138.mohamad^samiai fard^106179.ekhtiyar^hasannezhad chand^106294.ahmad^mohamadi^106344.hamzeh^malek pour^106575.akbar^tavakkoli^106591.mehdi^ranjori^107300.^^107318.^^107359.ensieh^dibaei khoo^107367.mahdieh^shaker^107565.marzie^barakchi^102947.khosro^sediqi^102962.ali^kiaeypoor^103036.asmaeil^davarpanahdezaj^103093.maryam^mohammadi^103168.gholamali^ghanaei^103473.mohammad ali^gholi pour^104075.^^104182.amir^keivanbod^104216.mehdi^ebrahimi^104372.akbar^heydari ashteyani^104414.^^104422.^^104521.jafar^samadi^104539.ahmad^miladi^104547.alahvirdi^shahabisar^104554.naser^badaghi hazejan^104570.siroos^mirzaei^104596.samad^zarei^104604.abolfazl^shokrzade^104612.^^104877.mahdi^farjvand^104893.";



function test(input){
	


let dec = input.split(" ");


let results = fileSearch(dec,file);
let upper =0 ;
let lower = 0 ;
let element = document.getElementById("showDiv");

element.innerHTML = "";

for(let i=0; i<=20; i++ ){
		
	if(results[i]===undefined)
		return;
	
	upper = parseInt(results[i].startIndex)+1;
	lower = parseInt(results[i].startIndex)-1;
	
	while(file[upper]!='.'){
		upper++;
	}
	
	while(file[lower]!='.' && lower>=0){
		lower--;
	}
	let record = file.substring((lower+1),upper);
	let splitedRecord = record.split('^');
	
	let newChild = document.createElement("div");
	newChild.style.width = '100%';
	newChild.style.border = 'solid';
	newChild.style.marginTop='10px';
	newChild.style.borderWidth='1px';
	newChild.style.paddingLeft = '5px';
	newChild.style.color = 'blue';
	newChild.style.borderColor = 'red';
	let txt = document.createTextNode((i+1)+'- '+splitedRecord[0]+' '+splitedRecord[1]+' '+splitedRecord[2]);
	newChild.appendChild(txt);
	
	element.appendChild(newChild)
}

}

</script>

<input type="text" oninput="test(this.value)">

<hr>

<div id="showDiv" style="width:100% min-height:100px">

</div>
